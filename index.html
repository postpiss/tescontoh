<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Image → Video (Demo)</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,arial;margin:24px}
.card{max-width:720px;margin:auto}
input{display:block;margin-top:12px}
video{width:100%;max-height:480px;margin-top:12px}
.btn{padding:8px 12px;background:#111;color:#fff;border-radius:6px;border:0}
</style>
</head>
<body>
<div class="card">
<h1>Image → Video (Demo)</h1>
<p>Unggah gambar, server akan membuat video demo (Ken Burns effect) selama ~6 detik. Untuk mode provider, ubah <code>MODE</code> di .env.</p>


<input id="imageInput" type="file" accept="image/*" />
<button id="uploadBtn" class="btn">Generate Video</button>


<div id="status"></div>


<video id="preview" controls style="display:none"></video>
<a id="downloadLink" style="display:none" download>Download Video</a>
</div>


<script>
const input = document.getElementById('imageInput');
const btn = document.getElementById('uploadBtn');
const status = document.getElementById('status');
const preview = document.getElementById('preview');
const downloadLink = document.getElementById('downloadLink');


btn.addEventListener('click', async () => {
if (!input.files || !input.files[0]) { alert('Pilih gambar dulu'); return; }
const file = input.files[0];
const fd = new FormData();
fd.append('image', file);


status.textContent = 'Uploading...';
preview.style.display = 'none';
downloadLink.style.display = 'none';


try {
const res = await fetch('/generate', { method: 'POST', body: fd });
if (!res.ok) {
const j = await res.json().catch(()=>null);
status.textContent = 'Gagal: ' + (j?.error || res.statusText);
return;
}


const blob = await res.blob();
const url = URL.createObjectURL(blob);
preview.src = url;
preview.style.display = 'block';


downloadLink.href = url;
</html>
